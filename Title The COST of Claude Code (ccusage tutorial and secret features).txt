Title: The COST of Claude Code (ccusage tutorial and secret features)

[0:00] I have a number of group chats with my
[0:02] friends who are developers and we were
[0:04] all like sharing our CC usage scorecards
[0:08] as like bragging rights in the chat and
[0:10] I was like in one chat I was the winner
[0:13] and then another chat my friend was like
[0:15] oh that's cute and showed me like $4,000
[0:18] in usage. It's this weird like scorecard
[0:20] of like nerd cred of how much are you
[0:23] using this? How much are you building? I
[0:25] saw a tweet from somebody and he said
[0:28] like CC usage screenshot is the next
[0:31] generation of GitHub commit graph. So I
[0:36] I was so I was so happy to see that.
[0:38] How do you pronounce your name?
[0:40] Uh Neop.
[0:43] We can just jump right into it. I'm
[0:45] going to run my CC usage and you can
[0:48] tell me what I'm seeing here.
[0:50] Oh, you installed the CC usage. All
[0:54] right. Yes, I did. And I noticed maybe
[0:55] you could start there. Should someone
[0:57] install it or should they just run it uh
[0:59] remotely?
[1:00] I recommend to use a bunx. It's very
[1:03] faster.
[1:04] The recommended usage is bunx space CC
[1:06] usage.
[1:07] Yes, because because uh so I I release
[1:11] CC usage quite often. So you can run BX
[1:15] CC usage to face the latest one.
[1:17] So here's the report I get. So tell me
[1:19] what I'm seeing here. So this table is
[1:24] all about the cost. It's kind of like
[1:27] pay as you go plan or if you are in the
[1:30] max brand or prop
[1:32] how much how much cost you save.
[1:35] Everyone likes talking about money or
[1:38] everyone is talking about the bargain or
[1:40] something like that.
[1:41] For context on my end, I am on the $200
[1:44] a month Cloud Max plan. Yeah.
[1:46] Um I was on the $100 a month max uh
[1:49] plan. And the reason I upgraded to 200
[1:52] was primarily for Opus 4 usage.
[1:55] Okay.
[1:56] So what we're seeing is probably my last
[1:59] 3 weeks of usage and I've gotten about
[2:02] $1,200
[2:03] worth of tokens out of this. So um what
[2:07] I noticed when I very first started
[2:08] using Cloud Code and what I think
[2:10] everybody noticed is how expensive it
[2:12] is. And I felt like I could rack up $40,
[2:15] $50 in a few hours. Um, and it was the
[2:19] it created this real anxiety for me of
[2:22] like, oh, is do I really want to use
[2:24] this and and do I how do I optimize it?
[2:27] And then when they rolled out the Cloud
[2:29] Max plans, it felt sort of like
[2:31] Christmas because now you could just use
[2:34] Cloud Code for all the things. And then
[2:36] I was shocked when I first used CC usage
[2:39] to see how much I would have spent in
[2:41] tokens if I had been on metered
[2:43] building. I'm sure you're getting tagged
[2:45] on everybody's screenshots. Like what is
[2:47] the biggest what's the biggest number
[2:49] you've seen down here so far?
[2:51] I already saw like 8.7K
[2:56] per month.
[2:57] Wow.
[2:58] And he he's using CL in parallel every
[3:02] day and he only uses Opus. What are are
[3:05] some of the hidden features or or just
[3:07] the features that people might not
[3:08] necessarily know about?
[3:10] Okay, so okay, you can hear the B XC
[3:13] usage does help.
[3:20] Got it.
[3:21] Yeah, you know there are a bunch of
[3:23] features.
[3:24] Awesome, right? Yeah. Yeah.
[3:25] Walk me through some of these.
[3:27] So when you hit CC usage, so the default
[3:31] command is daily, right? Right. So,
[3:35] let's go through the monthly.
[3:37] Okay.
[3:38] One. Okay. Yeah. So, you can you can
[3:40] type it monthly.
[3:42] And so, I'm going to do CC usage
[3:44] monthly.
[3:45] Yes.
[3:46] Like that. Got it.
[3:47] Yeah.
[3:49] So, you can see how much tokens you used
[3:52] in the last month and this month, right?
[3:55] Okay. Yeah. Yeah. So, you you you
[3:58] used a lot.
[3:59] It's all relative, I think. Where are
[4:01] those logs that you're reading? I'm
[4:03] guessing this is in my like claw
[4:05] directory in my home folder perhaps.
[4:07] So you can go to project directory
[4:10] projects. Yeah.
[4:12] Yep. Yep.
[4:13] So there are bunch of directories and
[4:16] you can choose your uh look at that
[4:20] favorite project and you can see some
[4:23] JSON L.
[4:24] Yeah.
[4:25] Yep. Yep. Yep. Oh, look at that. Oh, so
[4:28] cool. So it has the JSON L and that has
[4:32] everything that it does. And then this
[4:34] is also I I suppose when I run claw-res,
[4:39] this is what it's reloading, right?
[4:41] Yeah. Yeah. Yeah, definitely.
[4:43] Oh yeah. You can see here cache creation
[4:45] input tokens
[4:46] 24,000 input tokens for Oh, super super
[4:50] cool. Okay. Request ID and then you're
[4:52] going to when you get the response back,
[4:54] you're going to see the uh the tokens as
[4:55] well. That's super interesting.
[4:57] Yeah. Let's try the session one.
[4:59] Uh-huh.
[5:02] Oh, interesting.
[5:05] Yeah. So, so, so you can see how many
[5:09] you how many tokens you used in the
[5:12] specific projects.
[5:14] So, the main project I've been working
[5:16] on uh is this thing called YouTube track
[5:19] tracker. But I this last week I was
[5:21] experimenting a lot with work trees and
[5:24] trying to run cloud code in parallel.
[5:27] And so a lot of what we're seeing here
[5:29] are um branches for specific issues and
[5:34] the the work trees where I was trying to
[5:36] to have cloud code work in parallel.
[5:38] Interesting thing is that the cloud code
[5:41] uses cash prompt so much, right? Yes. So
[5:45] there are lots of cash tokens. What
[5:48] would be an example of the types of
[5:49] tokens that you're you suspect they're
[5:51] caching?
[5:52] I don't I I don't know everybody know
[5:55] about cash token prompt. Yeah, cash
[5:58] talker is a feature of code when you use
[6:02] clo codes. So there are long
[6:04] conversations and uh and the previous
[6:08] conversation should be like duplicate of
[6:11] the last request, right? So they they
[6:15] see that okay we received the uh
[6:17] conversation before so we see this
[6:21] conversation as a cached one cash
[6:24] prompting is really tricky when content
[6:27] changed a little bit it's not cached one
[6:30] anymore I think uh they optimize how to
[6:33] use the cache prompting
[6:36] in the middle of June and also before
[6:39] the sonet 4 and opus 4 the uh length of
[6:42] The save time is like five minutes.
[6:46] After the phone, they save the cash for
[6:50] an hour. So this is another way for them
[6:53] to like optimize the cash use.
[6:56] It was just astounding to me that like
[6:58] input here for instance, let's just call
[7:00] it 50,000. Output tokens, let's just say
[7:02] it was 10 times that amount. Let's just
[7:04] say it was 500,000.
[7:06] And but then the the cash tokens
[7:10] are
[7:12] uh I'm sorry the total yeah the total
[7:14] cash read here or total tokens let's say
[7:17] total tokens here are 500 million. So so
[7:22] you're you're talking like the the
[7:24] output tokens are 1 1,000th of the total
[7:29] tokens. And so they're that basically
[7:32] like the cash is representing if I'm
[7:34] reading this right the cash is
[7:36] representing like 99.9%
[7:38] of
[7:39] the tokens that like that's pretty
[7:41] incredible.
[7:42] I think I think they reuse the code base
[7:46] as a cash token. I think
[7:48] Oh, interesting.
[7:49] I think at the end of May, so the
[7:52] algorithm is different. They send the
[7:55] they send the prompt first and they then
[7:58] send they send the code base I think but
[8:01] they change the they optimize the
[8:03] algorithm first they send all code base
[8:06] and then add add the prompt at the end.
[8:10] So, so it increase the cost cache
[8:14] efficiency, right?
[8:15] That's interesting too about the code
[8:17] base because I think a lot of the
[8:21] Were you using cursor before you were
[8:24] using cloud code so much?
[8:25] No, no,
[8:26] no. You were never on cursor.
[8:28] I'm a big actually.
[8:31] Yeah. Yeah. Amazing. Well, I I think
[8:34] that a lot of folks were wondering when
[8:36] cloud code came out and and to today why
[8:39] it feels like you're getting such better
[8:42] code generation from cloud code than you
[8:46] do from cursor when even if you're using
[8:48] the cloud 4 models in cursor and I
[8:52] suspect that this huge amount of context
[8:56] and the caching
[8:58] has a lot to do with that, right? Like I
[9:00] just suspect that when you're working
[9:01] with claude code, enthropic is passing
[9:04] in a whole lot more context on every
[9:07] inference than what cursor is doing
[9:10] given the fact that you're paying cursor
[9:11] $20 a month and given the fact that you
[9:14] know for me at least I've I've spent
[9:17] $1,200 worth of tokens on uh uh on cloud
[9:20] code over the last few weeks. So
[9:23] and and another and also think this is
[9:25] my guess but I think I think they have
[9:28] their own document
[9:31] uh code base in their server. So before
[9:35] before we cannot generate fives. Yeah.
[9:39] So but we cannot deal with it but so
[9:42] right now we can deal with it and we can
[9:45] see there are lots of cash tokens. So I
[9:47] I think so this is my guess but they
[9:50] they they sent the documentation to the
[9:53] cloud code.
[9:54] It'd be cool to get answers from them
[9:57] someday on that. But uh it's just really
[9:58] fascinating how this view over the logs
[10:02] gives you a little more insight into
[10:04] some of the magic that's happening that
[10:07] makes cloud code feel so magical. Uh
[10:10] another command blocks. Blocks. Got it.
[10:13] Blocks.
[10:14] Yep.
[10:17] So yeah, this is a really cool feature.
[10:19] So one of our contributors
[10:22] worked on this. When you start using
[10:25] cloud code, so there's like there's a
[10:28] time range in five hours. And when you
[10:32] so when you consume a lot of tokens in
[10:36] the five hours, you cannot use clo
[10:39] anymore. This view can show you how the
[10:43] five block five hours blocks works.
[10:46] I like that.
[10:48] So
[10:49] that's really cool.
[10:50] Yeah. Yeah. So you can you can see Yeah.
[10:52] Tell me your thoughts on the table. I
[10:55] guess I have not since bumping up to the
[10:57] $200 a month plan. I have not hit that a
[11:00] lot. But I do have a couple friends who
[11:03] were trying to see how much they how
[11:05] much usage they could get out of either
[11:07] the $100 or the $20 a month plans. And
[11:10] this seems like this view would be very
[11:12] very useful to them.
[11:13] Yeah. Oh, you use $76
[11:16] per block, right?
[11:19] Yeah.
[11:20] Yeah. 75. Yeah. Yeah. Yeah.
[11:23] Yeah.
[11:25] That's so Yeah. So 7. So right here. So
[11:28] on July 1st,
[11:31] I spent $75
[11:33] in worth of tokens in five hours. So
[11:36] that's really And then yeah, if we go
[11:39] and the next block, I spent another $33.
[11:43] That's so interesting.
[11:46] I love that. What a great view. And then
[11:48] we can see actually this one here that I
[11:49] was working on right before we hopped on
[11:52] the call. So it's saying that block is
[11:53] still usage still still open right now.
[11:56] Yeah. So I think I think you're in
[11:59] active block session active block. So
[12:02] you can you can use the last command.
[12:06] This is really magical. So so you
[12:09] last one is not individual sub command.
[12:12] So you can hit BX.
[12:15] Okay.
[12:16] CC usage uh blocks
[12:20] blocks
[12:21] blocks dash dash live
[12:24] live.
[12:25] Yeah. There we go.
[12:28] Uh
[12:31] oh, nice.
[12:33] Yeah.
[12:35] So,
[12:35] it's awesome.
[12:37] So, this is a live view and yeah,
[12:39] actually it's a buggy. So, I'm I'm
[12:41] fixing a lot actually, but you can see
[12:45] how many session you have or and also
[12:49] you can see the burn rate of tokens per
[12:53] blocks. So this is a really cool
[12:55] feature, right?
[12:56] I love that.
[12:58] And yeah, you can see the projection of
[13:01] the current blocks, right? For example.
[13:04] So I think I think it estimate that you
[13:08] you going to use $44
[13:11] for this five hour session. Five hour
[13:14] block. Yeah. Yeah. Yeah.
[13:15] This would be so fun to have this up on
[13:17] a separate monitor. It's like you have
[13:20] this going on one monitor while you run
[13:21] your cloud code sessions in the other
[13:23] one to see how much more work you can do
[13:25] over the next few hours.
[13:26] Yeah. So my friend spread the terminal
[13:29] screen using T-Max and so always show
[13:33] the live monitor.
[13:35] Are you running cloud in parallel at
[13:36] all?
[13:37] Yeah, I sometimes use like use cloud
[13:40] code in parallel using g work. I
[13:42] recently find the tool which provides
[13:45] great integration for uh git work squad
[13:50] you know that
[13:51] cloud squad okay I do not know that
[13:53] cloud squad integrates cloud code and
[13:57] t-max and g get work so it's really
[14:02] useful tool I
[14:03] this is the one you're talking about
[14:04] right
[14:05] yeah yeah yeah this one
[14:07] oh super interesting
[14:09] so so when so when we use we don't we
[14:11] don't tie I get the work work tree
[14:14] command anymore. Yeah.
[14:15] Right. Good. Okay. Yes. Cuz I I've been
[14:19] like I I wrote like a shell script to
[14:21] like try to spin up the work tree and
[14:23] then tear it down afterwards and then
[14:24] I'm still like running into I feel like
[14:27] merge conflicts. All like this sort of
[14:29] UI makes a whole lot more sense.
[14:31] Yes.
[14:32] For that.
[14:33] All right. I like that a lot. Okay.
[14:35] All right. I'm going to check that out
[14:36] afterwards. How did you build this
[14:39] in the initial version? I mean the 0.1
[14:43] version I created only a couple of hours
[14:46] using cloud code. I remember the event
[14:50] hosted by Anthropic. I must be I I think
[14:55] it's on 21st of May actually and they
[14:58] announced the Sonet 4 and Opus 4 and I
[15:03] was shocked the how smart the model is
[15:08] but Opus 4 and Sonet 4 is a game changer
[15:13] right so and Cloud's experience is
[15:16] really good. So I was I was really into
[15:20] it. I saw a Japanese blog how to
[15:22] calculate the cost at that time. So
[15:25] there is a log file of code. We have a
[15:29] property called cost USD.
[15:32] So at that time we can just uh sum up
[15:35] the cost USD and and calculate the total
[15:39] cost. It looks interesting. Why don't I
[15:42] create a new tool and why don't I try
[15:45] the new vibing style? So I I decided to
[15:50] create a CC usage and I didn't expect it
[15:54] goes seriously and it goes so viral.
[15:57] I noticed at the start of this you say
[15:59] that you're fetching the latest model
[16:01] pricing from light LLM. At the end of
[16:03] May we can calculate the cost easily by
[16:07] some of the cost USD properties but also
[16:12] deleted the property.
[16:14] Oh really?
[16:15] I was really shocked and yeah everyone
[16:18] in our community was so shocked. So the
[16:21] issue came up like I don't know 1.010
[16:26] doesn't support cost USD anymore. We
[16:29] need to do we need to find alternative
[16:31] solutions. So I came up idea to like
[16:34] just calculate the cost by using the to
[16:39] consumed the token and the price table.
[16:43] I changed the spec in just four hours I
[16:47] think.
[16:48] Is there anything in particular that you
[16:51] are looking for help on with CC usage? I
[16:54] know you have a lot of contributors. Um
[16:57] yeah, some people ask me uh about Gemini
[17:01] CI but I don't know because Gemini CI
[17:07] provides the cost usage when you finish
[17:10] finish using Gemini. So I don't I don't
[17:13] think I created. So there are a lots of
[17:17] people uh started to creating something
[17:21] cool using CC usage, right? So like some
[17:25] so some people created the raycast
[17:28] extension. Yeah, you can see the CC
[17:30] usage result on not on the raycast
[17:33] window but also you can see on the menu
[17:35] bar, right?
[17:36] Oh, that's cool. So I would be able to
[17:38] see it right up here.
[17:40] Yeah. And also also I also another
[17:43] people is creating the UIs right. So uh
[17:48] like like dashboard or something and and
[17:51] I heard somebody started to create a
[17:54] leaderboard for
[17:55] CC. Yes. So this is this was funny. I
[17:59] noticed on the Claude AAI subreddit
[18:01] there were people posting their their CC
[18:05] usage and then you know I think I was
[18:09] surprised a little bit about how
[18:11] negative the comments some of the
[18:13] comments were but I guess it kind of
[18:14] makes sense right like it does feel like
[18:17] this $200 a month plan to get $1,200 of
[18:20] tokens is a great gift from Anthropic
[18:23] that probably can't last forever but
[18:26] almost certainly is not going to last
[18:27] forever. or if a bunch of people on the
[18:29] internet just are like, "How do I spend
[18:31] as many tokens as possible as quickly as
[18:33] possible so I can like get on top of the
[18:36] Reddit leaderboard?" Or this acts as
[18:38] this measure of conspicuous consumption
[18:42] slash nerdcred.
[18:44] But yeah, then there's also like all the
[18:46] environmental and wasteful concerns all
[18:48] wrapped up in that. And it's really
[18:49] interesting just all the feelings that
[18:52] uh that this tool evokes. I bet you were
[18:54] surprised by some of the reactions that
[18:56] folks had. So I saw another tweet and
[18:59] and he show the table and he see he saw
[19:03] the tokens and cost and he realized okay
[19:08] I worked so hard with clothing for for
[19:11] this m so I I want to cheer me up like
[19:15] that he said like that. So it was really
[19:18] heartwarming. I love that. I spent most
[19:20] of my, you know, the last couple years
[19:23] just building a lot of stuff with AI.
[19:25] And, you know, some days it feels like
[19:29] you're learning a lot and building a
[19:31] lot. Some days it feels like you spent a
[19:33] whole bunch of hours doing something and
[19:35] the code never worked. Of course, it's a
[19:37] imperfect metric, but it is really cool
[19:40] to look back and see, oh no, I really
[19:44] was spending time trying to learn how
[19:45] this thing works. There is something
[19:47] very real about that of it is proof that
[19:49] you've been using the tools and I think
[19:51] that all of us are really trying to
[19:53] figure out like what do these things
[19:54] mean and how do I build software better
[19:56] because of the new tools that we have
[19:57] today.
[19:58] Yeah. Yeah. Yeah. I think so. I think
[20:00] so. So since usage is not not only the
[20:04] font to but also they
[20:06] enhance enhance the pipe coders or the
[20:10] developers. I'm really confident to say
[20:12] that I I I'm really happy to involve
[20:17] this awesome tour and also and yeah so
[20:21] this is really important things so I'm
[20:23] I'm taking a lot lots of time if you're
[20:26] happy about my tours uh please sponsor
[20:30] me and uh if you sponsor me so the all
[20:34] income is not only for me but also uh my
[20:38] contributors
[20:39] I think you are the first uh GitHub open
[20:42] source project that I've ever sponsored.
[20:44] And it was uh for me it was like, man,
[20:46] this it just is such a fun project that
[20:51] helps you understand
[20:53] the usage of these tools and and helps
[20:56] you understand the value you're getting
[20:58] out of a Cloud Max plan. Um but also I
[21:01] think helps me stay accountable.
[21:04] when you sign up for the Claude Max
[21:05] plan, you almost like feel bad walking
[21:08] away from your machine because you feel
[21:09] like if it's not working, I'm losing
[21:11] value, right? And so I actually really
[21:14] love starting my day by looking at CC
[21:16] usage. So I really appreciate you
[21:18] creating this. I've had so much fun with
[21:20] it. My friends and I have had a lot of
[21:21] fun and it has sparked some really great
[21:24] conversations between us and ultimately
[21:25] I think is helping us get better at
[21:27] using uh cloud code. So thank you for
[21:29] this.
[21:30] Thank you so much. I think I think CC
[21:31] usage has changed my life. So I got I
[21:35] got a lot of attention. I had so many
[21:38] conversation towards not only C uh
[21:41] contributors but also like customers or
[21:44] users including you. Yeah. So I guess so
[21:48] before before your email I I saw your
[21:52] video and Yeah. Now I'm here and I'm
[21:55] talking with you and I can connect with
[21:58] lots of people. It's really fun and I'm
[22:02] I'm really honored to have this cool
[22:05] project.
[22:06] Oh man, it there's so much fun stuff
[22:08] happening right now and I think you just
[22:10] never know what thing you're going to
[22:13] make that is going to uh you know land
[22:17] and and excite the internet. Um and and
[22:19] it's just I I feel like there's just
[22:22] never been a better time to be a
[22:24] software developer. And you know, you've
[22:27] got this project now that I I don't even
[22:30] know. I know you're at three and a half
[22:31] thousand stars. I don't even know how
[22:32] many downloads or installs. What is it
[22:34] at right now?
[22:35] It's it's 90k.
[22:38] 90,000. Incredible, right? So, that's so
[22:40] cool. Like, what an amazing time uh to
[22:42] be able to to write code. So, thank you
[22:45] very much for for making it and thanks
[22:46] for uh hanging out with me here today.
[22:49] Yeah. Yeah. Thank you for having me.